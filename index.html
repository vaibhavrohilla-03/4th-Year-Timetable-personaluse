<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4th Year Timetable</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .timetable-grid {
            display: grid;
            grid-template-columns: 60px repeat(5, 1fr); /* Time col + 5 day cols */
            grid-template-rows: auto repeat(4, 120px);  /* Header row + 4 time rows */
            gap: 4px;
        }
        .time-label {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            font-size: 0.875rem;
            color: #64748b; /* slate-500 */
        }
        .day-header {
            font-weight: 600;
            text-align: center;
            padding: 0.5rem 0;
            color: #334155; /* slate-700 */
        }
        .grid-cell {
            background-color: white;
            border: 1px solid #e2e8f0; /* slate-200 */
            border-radius: 0.5rem;
        }
        .class-item {
            border-radius: 0.5rem;
            padding: 0.75rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .class-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">4th Year Timetable</h1>
            <p class="text-slate-500 mt-2">Personalized schedule based on your sections. Click a class for details.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div id="timetable-container" class="timetable-grid">
                    </div>
            </div>

            <div class="space-y-8">
                <div id="details-panel" class="bg-white p-6 rounded-2xl shadow-lg h-fit">
                    <h2 class="text-xl font-semibold mb-4 border-b pb-2 text-slate-700">Class Details</h2>
                    <div id="details-content" class="text-slate-600">
                        <p class="text-center py-8">Click on a class to see its details.</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-xl font-semibold mb-4 border-b pb-2 text-slate-700">Weekly Course Load</h2>
                    <canvas id="loadChart" style="max-height: 300px;"></canvas>
                </div>
            </div>
        </main>
    </div>

    <script>
        const classData = [
            { id: 1, name: 'Blockchain Technologies', prof: 'Dr. Ankur Pandey', room: '102 (2AB)', day: 'Monday', start: '9:00 AM', end: '10:40 AM', span: 2, color: 'bg-sky-100', textColor: 'text-sky-800', borderColor: 'border-sky-300' },
            { id: 2, name: 'Blockchain Technologies', prof: 'Dr. Ankur Pandey', room: '102 (2AB)', day: 'Wednesday', start: '9:00 AM', end: '9:50 AM', span: 1, color: 'bg-sky-100', textColor: 'text-sky-800', borderColor: 'border-sky-300' },
            { id: 3, name: 'Linux System and Shell Programming', prof: 'Dr. Dibakar Sinha', room: '102 (2AB)', day: 'Tuesday', start: '9:50 AM', end: '10:40 AM', span: 1, color: 'bg-amber-100', textColor: 'text-amber-800', borderColor: 'border-amber-300' },
            { id: 4, name: 'Linux System and Shell Programming', prof: 'Dr. Dibakar Sinha', room: '29 (2AB)', day: 'Wednesday', start: '9:50 AM', end: '11:30 AM', span: 2, color: 'bg-amber-100', textColor: 'text-amber-800', borderColor: 'border-amber-300' },
            { id: 5, name: 'User Interface Design', prof: 'Ms. Kirti Paliwal', room: '217 (LHC)', day: 'Friday', start: '9:50 AM', end: '10:40 AM', span: 1, color: 'bg-violet-100', textColor: 'text-violet-800', borderColor: 'border-violet-300' },
            
            // --- UPDATED CLOUD COMPUTING DATA ---
            { id: 6, name: 'Cloud Computing Applications', prof: 'Ms. Neha', room: '103 (LHC)', day: 'Monday', start: '10:40 AM', end: '11:30 AM', span: 1, color: 'bg-teal-100', textColor: 'text-teal-800', borderColor: 'border-teal-300' },
            { id: 7, name: 'Cloud Computing Applications', prof: 'Ms. Neha', room: '103 (LHC)', day: 'Tuesday', start: '10:40 AM', end: '11:30 AM', span: 1, color: 'bg-teal-100', textColor: 'text-teal-800', borderColor: 'border-teal-300' },
            { id: 8, name: 'Cloud Computing Applications', prof: 'Ms. Neha', room: '103 (LHC)', day: 'Friday', start: '10:40 AM', end: '11:30 AM', span: 1, color: 'bg-teal-100', textColor: 'text-teal-800', borderColor: 'border-teal-300' },
            
            // --- UPDATED CLOUD SECURITY DATA ---
            { id: 9, name: 'Cloud Security and Privacy', prof: 'Ms. Vaishali Chauhan', room: '103 (LHC)', day: 'Monday', start: '11:30 AM', end: '12:20 PM', span: 1, color: 'bg-rose-100', textColor: 'text-rose-800', borderColor: 'border-rose-300' },
            { id: 10, name: 'Cloud Security and Privacy', prof: 'Ms. Vaishali Chauhan', room: '103 (LHC)', day: 'Tuesday', start: '11:30 AM', end: '12:20 PM', span: 1, color: 'bg-rose-100', textColor: 'text-rose-800', borderColor: 'border-rose-300' },
            { id: 11, name: 'Cloud Security and Privacy', prof: 'Ms. Vaishali Chauhan', room: '103 (LHC)', day: 'Friday', start: '11:30 AM', end: '12:20 PM', span: 1, color: 'bg-rose-100', textColor: 'text-rose-800', borderColor: 'border-rose-300' },
        ];

        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
        const timeSlots = ['9:00 AM', '9:50 AM', '10:40 AM', '11:30 AM'];

        function createAndPopulateGrid() {
            const grid = document.getElementById('timetable-container');
            grid.innerHTML = '';

            days.forEach((day, index) => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.textContent = day;
                dayHeader.style.gridColumn = index + 2;
                dayHeader.style.gridRow = 1;
                grid.appendChild(dayHeader);
            });

            timeSlots.forEach((time, timeIndex) => {
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.textContent = time;
                timeLabel.style.gridColumn = 1;
                timeLabel.style.gridRow = timeIndex + 2;
                grid.appendChild(timeLabel);

                days.forEach((day, dayIndex) => {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.style.gridColumn = dayIndex + 2;
                    cell.style.gridRow = timeIndex + 2;
                    grid.appendChild(cell);
                });
            });

            classData.forEach(cls => {
                const dayIndex = days.indexOf(cls.day);
                const timeIndex = timeSlots.indexOf(cls.start);
                if (dayIndex === -1 || timeIndex === -1) return;

                const classDiv = document.createElement('div');
                classDiv.className = `class-item ${cls.color} ${cls.textColor} border-l-4 ${cls.borderColor}`;
                classDiv.innerHTML = `<strong class="text-sm font-semibold">${cls.name}</strong><span class="text-xs mt-1">${cls.prof}</span>`;
                classDiv.onclick = () => showDetails(cls.id);

                classDiv.style.gridColumn = dayIndex + 2;
                classDiv.style.gridRow = `${timeIndex + 2} / span ${cls.span}`;
                
                grid.appendChild(classDiv);
            });
        }

        function showDetails(classId) {
            const detailsContent = document.getElementById('details-content');
            const cls = classData.find(c => c.id === classId);
            if (!cls) return;

            detailsContent.innerHTML = `
                <div class="space-y-3">
                    <div><h3 class="text-lg font-bold ${cls.textColor}">${cls.name}</h3></div>
                    <div class="text-sm space-y-1">
                        <p><strong class="text-slate-500 w-20 inline-block">Professor:</strong> ${cls.prof}</p>
                        <p><strong class="text-slate-500 w-20 inline-block">Room:</strong> ${cls.room}</p>
                        <p><strong class="text-slate-500 w-20 inline-block">Time:</strong> ${cls.start} - ${cls.end}</p>
                        <p><strong class="text-slate-500 w-20 inline-block">Day:</strong> ${cls.day}</p>
                    </div>
                </div>`;
        }

        function createLoadChart() {
            const ctx = document.getElementById('loadChart').getContext('2d');
            const loadData = days.map(day => classData.filter(cls => cls.day === day).length);
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: days.map(d => d.substring(0, 3)),
                    datasets: [{
                        label: 'Number of Classes',
                        data: loadData,
                        backgroundColor: 'rgba(56, 189, 248, 0.6)',
                        borderColor: 'rgba(56, 189, 248, 1)',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, ticks: { stepSize: 1 } } },
                    plugins: { legend: { display: false } }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            createAndPopulateGrid();
            createLoadChart();
        });
    </script>
</body>
</html>
